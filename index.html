<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Taming memory leaks in JavaScript</title>
    <meta charset="utf-8">
    <style>
      html {
        font-family: "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell",
        "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
      }
      h1, h2, h3 {
        font-weight: normal;
      }
      .emoji {
        font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol",
        "Twemoji Mozilla","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif;
      }
      .remark-code, .remark-inline-code {
        font-family: monospace;
      }
      .flex {
        display: flex;
        flex-direction: row;
        height: 200px;
        width: 200px;
      }
      img {
        max-width: 100%;
        max-height: 35vh;
        object-fit: contain;
      }
      .remark-slide-content {
        background-size: contain;
      }
      a, a:visited {
        color: royalblue;
      }
    </style>
  </head>
  <body>
    <script src="./remark-latest.min.js"></script>
    <script>
      (() => {
        const $ = document.querySelector.bind(document)
        const slideshow = remark.create({
          sourceUrl: './markdown.md'
        });
        slideshow.on('showSlide', slide => {
          Promise.resolve().then(() => {
            console.log(slide)
            const slideNode = $('.remark-slide-container.remark-visible')
            if (slideNode.getAttribute('data-adjusted')) {
              return
            }
            const content = slideNode.querySelector('.remark-slide-content')
            const children = [...content.children]
              .filter(_ => _.tagName !== 'H1')
              .filter(_ => (!_.classList.contains('remark-slide-number')))
            const first = children[0]
            const last = children.slice(-1)[0]
            const h1 = content.querySelector('h1')

            if (first && last) {
              const parentRect =
              const containerRect = content.getBoundingClientRect()
              const firstRect = first.getBoundingClientRect()
              const lastRect = last.getBoundingClientRect()
              const h1Rect = h1.getBoundingClientRect()
              const childrenHeight = lastRect.bottom - firstRect.top
              const margin = (containerRect.height - childrenHeight - h1Rect.height) / 2
              for (const child of children) {
                child.style.transform = `translateY(${margin}px)`
              }
            }

            slideNode.setAttribute('data-adjusted', 'true')

          })
        })
      })()
    </script>
  </body>
</html>